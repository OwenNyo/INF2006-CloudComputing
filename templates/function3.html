<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Function 3</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/function3.css') }}">

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
    {% include "partials/navbar.html" %}

    <main class="page">
        <!-- HERO / TITLE CARD -->
        <section class="hero">
            <div class="hero-inner">
                <div class="pill">University ROI Proxy (Salary × Employability)</div>
                <h1>Which university has the strongest combined outcome?</h1>
                <div class="subtitle">
                    <p>
                        <strong>ROI Proxy</strong> = <strong>FT Permanent Employment Rate (%)</strong> ×
                        <strong>Gross Monthly Median Salary (S$)</strong>.
                        Higher values indicate a better combined employability + pay outcome.
                    </p>

                    <div class="summary">
                        <div class="summary-group">
                            <span class="label positive">Top 3 ROI</span>
                            <span class="values">{{ top3 | join(", ") }}</span>
                        </div>
                        <div class="summary-group">
                            <span class="label negative">Bottom 3 ROI</span>
                            <span class="values">{{ bottom3 | join(", ") }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- YEAR CONTROLS (dropdowns like Function 1) -->
        <div class="controls">
            <div class="control">
                <label for="yearFrom">From</label>
                <select id="yearFrom"></select>
            </div>

            <div class="control">
                <label for="yearTo">To</label>
                <select id="yearTo"></select>
            </div>

            <button class="btn" id="applyYears">Apply</button>
            <button class="btn btn-ghost" id="resetYears">Reset</button>
        </div>

        <!-- CARDS -->
        <section class="section">
            <div class="chart-grid">

                <div class="chart-card">
                    <div class="chart-head">
                        <h3 class="chart-title">Chart: ROI Proxy Score by University</h3>
                        <p class="chart-sub">Ranked composite index (FT employment × median salary).</p>
                    </div>
                    <div class="chart-wrap">
                        <canvas id="roiChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-head">
                        <h3 class="chart-title">Table: ROI Breakdown</h3>
                        <p class="chart-sub">Shows the average FT employment rate and median salary used in the score.
                        </p>
                    </div>

                    <div class="table-wrap">
                        <table id="roiTable">
                            <thead>
                                <tr>
                                    <th>University</th>
                                    <th>Avg FT Employment Rate (%)</th>
                                    <th>Avg Median Salary (S$)</th>
                                    <th>ROI Score</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

            </div>
        </section>
    </main>

    {% include "partials/footer.html" %}

    <!-- Flask → JS bridge -->
    <script>
    window.FUNCTION3_DATA = {
        yearsAll: {{ years | tojson | safe }},
        initialResults: {{ initial_results | tojson | safe }}
    };
    </script>



    <script src="{{ url_for('static', filename='js/function3.js') }}"></script>
</body>

</html>